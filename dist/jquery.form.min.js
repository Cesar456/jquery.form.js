(function(){function t(t){function e(){a.removeClass("invalid").nextUntil(":input").filter("div.errormsg").fadeOut()}if(t&&"checkValidity"in t)return t.checkValidity();var a=$(t),i={url:/^https?\:\/\/[a-z0-9]+/i,date:/^[0-9]{2,4}[\/\:\.\-][0-9]{2}[\/\:\.\-][0-9]{2,4}$/,time:/^[0-9]{2}\:[0-9]{2}(\:[0-9]{2})?$/,tel:/^\+?[0-9\s\.]{10,14}/,email:/^[a-z0-9\.\'\-]+@[a-z0-9\.\-]+$/i,number:/^-?[0-9]+(\.[0-9]+)?$/i,text:/.+/},r=a.attr("data-type")||a.attr("type"),n=a.attr("min"),l=a.attr("max"),o=a.attr("step"),s={url:"http://www.domain.com",time:"12:30",email:"name@domain.com",date:"2012-12-31"}[r],c=!!a.attr("required"),d=a.attr("pattern"),h="checkbox"!==r||a.prop("checked")?t.value||t.innerHTML:"",u={valueMissing:"checkbox"===r?"Please tick this box if you want to proceed":"Value missing",tooLong:"Too Long",typeMismatch:"Not a valid "+r+(s?" (e.g. "+s+")":""),patternMismatch:"Invalid pattern",rangeOverflow:"Value must be less than or equal to "+l,rangeUnderflow:"Value must be greater than or equal to "+n,stepMismatch:"Invalid value"};if(a.filter(".placeholder").attr("placeholder")===h&&(h=""),t.validity={valueMissing:c&&0===h.length,tooLong:!1,typeMismatch:h.length>0&&r in i&&!h.match(i[r]),patternMismatch:d&&h.length>0&&!h.match(RegExp("^"+d+"$")),rangeOverflow:l&&h.length&&h>parseFloat(l),rangeUnderflow:n&&h.length&&parseFloat(n)>h,stepMismatch:o&&h.length&&h%parseFloat(o),customError:!1,valid:!1},"color"===r&&h.length>0){var m=document.createElement("color");try{m.style.backgroundColor=h}catch(v){}m.style.backgroundColor||(t.validity.typeMismatch=!0)}a.hasClass("invalid")&&a.removeClass("invalid").nextUntil(":input").filter("div.errormsg").remove();for(var g in t.validity)if(t.validity[g])return a.trigger("invalid").addClass("invalid").after('<div class="errormsg">'+u[g]+"</div>"),setTimeout(e,1e3),!1;return t.validity.valid=!0}$.fn.checkValidity=function(){var e=!0;return($(this).is(":input")?this:$(":input",this)).each(function(){e&&(e=t(this))}),e}})();
$.fn.color=function(){return $.support.color?$(this):($($(this).is(":input[type=color]")?this:$("input[type=color]",this)).on("click focusout",function(){$(this).css({backgroundColor:this.value});var t,e=$(this).css("backgroundColor");e&&(t=e.match(/([0-9]+).*?([0-9]+).*?([0-9]+)/),t&&(this.style.color=500>parseInt(t[1],10)+parseInt(t[2],10)+parseInt(t[3],10)?"white":"black"))}),$(this))};
$.fn.datalist=function(){return $.support.datalist?!1:($($(this).is(":input[list]")?this:$("input[list]",this)).on("keyup",function(t){$(this).addClass("datalist");var i=$(this).nextUntil(":input").filter("div.datalist").eq(0);if(0===i.length&&(i=$("<div class='datalist'></div>").css({position:"absolute"}).insertAfter(this)),38!==t.which&&40!==t.which||!(i.find("ul").length>0)){var e=[],a=$(this).val().toLowerCase();$("option","#"+$(this).attr("list")).each(function(){var t=$(this).attr("value").toLowerCase();t.indexOf(a)>-1&&e.push(t)}),i.empty(),i.width($(this).width()),$("<ul><li>"+e.join("</li><li>")+"</li></ul>").appendTo(i)}}).on("up down",function(t){var i=$(this).nextUntil(":input").filter("div.datalist").eq(0),e=i.find("li.hover");e.length?(e=e["up"===t.type?"prev":"next"]().addClass("hover"),e["down"===t.type?"prev":"next"]().removeClass("hover")):e=i.find("li:first").addClass("hover"),$(this).val(e.text())}).on("blur",function(){var t=this;setTimeout(function(){$(t).removeClass("datalist")},100)}).find("+ div.datalist li").on("click",function(){$(this).parents("div.datalist").prevAll("input[list]").eq(0).val($(this).text())}),void 0)};
$.fn.date=function(){return $.support.date?$(this):($($(this).is("input[type=date],input[data-type=date]")?this:$("input[type=date],input[data-type=date]",this)).on("focus select",function(){var t=$("+ div.calendar div",this).fadeIn("fast"),e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=$(this);t.length||(t=$('<div class="calendar"><div></div></div>').insertAfter(this).find("div")),$(this).blur(function(){t.fadeOut("fast")});var n=new Date;if($(this).val().match(/^[0-9]{4}\-[0-1]?[0-9]\-[0-3]?[0-9]$/)){var s=$(this).val().split("-").slice(0,3);n.setYear(s[0]),n.setDate(s[2]),n.setMonth(--s[1])}(function r(n){var s="<table><caption></caption><thead><tr>";for(var l in e)s+="<th>"+e[l]+"</th>";s+="</tr></thead><tbody>";var o=n.getDate();n.setDate(1);var d=n.getDay();d>0&&(s+="<tr><td colspan='"+d+"'>&nbsp;</td>"),n.setMonth(n.getMonth()+1),n.setDate(0);for(var c=1;n.getDate()>=c;c++)s+=(0===(d+c-1)%7?"<tr>":"")+"<td"+(o===c?' class="selected"':"")+"><a href='javascript:void(0);'>"+c+"</a></td>"+(0===(d+c)%7?"</tr>":"");6>n.getDay()&&(s+="<td colspan='"+(6-n.getDay())+"'>&nbsp;</td></tr>"),s+="</tbody></table>",t.empty().append('<a href="javascript:void(0);" class="close">close</a>').find("a").click(function(){t.fadeOut("fast")}),$(s).prependTo(t).find("td").click(function(){var e=$(this).text();i.val(n.getUTCFullYear()+"-"+(10>n.getMonth()+1?"0":"")+(n.getMonth()+1)+"-"+(10>e?"0":"")+e),i.trigger("blur"),t.fadeOut("fast")}).end().find("caption").append('<a href="javascript:void(0);" class="prev">'+a[0===n.getMonth()?11:n.getMonth()-1]+'</a> <span class="current">'+a[n.getUTCMonth()]+" "+n.getUTCFullYear()+'</span> <a href="javascript:void(0);" class="next">'+a[(n.getMonth()+1)%12]+"</a>").find("a").click(function(e){return e.preventDefault(),e.stopPropagation(),"current"===this.className?!1:(t.fadeIn("fast"),n.setDate(1),n.setMonth(n.getMonth()+{next:1,prev:-1}[this.className]),r(n),!1)})})(n)}),void 0)};
$.event.special.submit={add:function(t){var e=t.handler,a=$(this);t.handler=function(t){return a.checkValidity()?e.apply(this,arguments):(t.preventDefault(),void 0)}}};
$.fn.number=function(){if($.support.number)return $(this);var t=null;return $(document.body).mouseup(function(){t&&clearTimeout(t)}),($(this).is("input[type=number],input[data-type=number]")?$(this):$("input[type=number],input[data-type=number]",this)).each(function(){function e(t){var e=(parseInt($(a).val(),10)||0)+t*r;e>s&&(e=s),n>e&&(e=n),$(a).val(e)}var a=this,i=$(this).outerWidth(),n=$(this).attr("min"),s=$(this).attr("max"),r=parseFloat($(this).attr("step"))||1;$(this).bind("keypress",function(t){var a=0;40===t.which&&(a=-1),38===t.which&&(a=1),a&&e(a)}).bind("blur",function(){$(this).val()!==$(this).filter(".placeholder").attr("placeholder")&&$(this).val($(this).val().replace(/[^\d\.\-]/gi,""))});var l=$(this).after('<span class="number" unselectable="on"><span unselectable="on"></span><span unselectable="on"></span></span>').addClass("number").find("+ span.number").attr("unselectable",!0).find("span").mousedown(function(){var a=$(this).parent().children().index(this);(function i(){e(a?-1:1),t=setTimeout(i,100)})()}).parents("span.number");setTimeout(function(){var t=0,e=parseInt($(a).css("marginRight"),10);$(a).css({paddingRight:t+22+"px",marginRight:0,width:$(a).width()-($(a).outerWidth()-i)+"px"}),l.css({marginRight:e+"px",marginTop:$(a).offset().top-l.offset().top+"px"})},0)})};
(function(t,e,a){function i(t){var e={},i=/^jQuery\d+$/;return a.each(t.attributes,function(t,a){a.specified&&!i.test(a.name)&&(e[a.name]=a.value)}),e}function n(t,i){var n=this,r=a(n);if(n.value==r.attr("placeholder")&&r.hasClass("placeholder"))if(r.data("placeholder-password")){if(r=r.hide().next().show().attr("id",r.removeAttr("id").data("placeholder-id")),t===!0)return r[0].value=i;r.focus()}else n.value="",r.removeClass("placeholder"),n==e.activeElement&&n.select()}function r(){var t,e=this,r=a(e),l=this.id;if(""===e.value){if("password"===e.type){if(!r.data("placeholder-textinput")){try{t=r.clone().attr({type:"text"})}catch(s){t=a("<input>").attr(a.extend(i(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":l}).bind("focus.placeholder",n),r.data({"placeholder-textinput":t,"placeholder-id":l}).before(t)}r=r.removeAttr("id").hide().prev().attr("id",l).show()}r.addClass("placeholder"),r[0].value=r.attr("placeholder")}else r.removeClass("placeholder")}var l,s,o="placeholder"in e.createElement("input"),d="placeholder"in e.createElement("textarea"),c=a.fn,h=a.valHooks;o&&d?(s=c.placeholder=function(){return this},s.input=s.textarea=!0):(s=c.placeholder=function(){var t=this;return t.filter((o?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":n,"blur.placeholder":r}).data("placeholder-enabled",!0).trigger("blur.placeholder"),t},s.input=o,s.textarea=d,l={get:function(t){var e=a(t);return e.data("placeholder-enabled")&&e.hasClass("placeholder")?"":t.value},set:function(t,i){var l=a(t);return l.data("placeholder-enabled")?(""===i?(t.value=i,t!==e.activeElement&&r.call(t)):l.hasClass("placeholder")?n.call(t,!0,i)||(t.value=i):t.value=i,l):t.value=i}},o||(h.input=l),d||(h.textarea=l),a(function(){a(e).delegate("form","submit.placeholder",function(){var t=a(".placeholder",this).each(n);setTimeout(function(){t.each(r)},10)})}),a(t).bind("beforeunload.placeholder",function(){a(".placeholder").each(function(){this.value=""})}))})(this,document,jQuery);
$.fn.range=function(){return $.support.range?!1:($(this).is("[type=range],[data-type=range]")?$(this):$("input",this)).filter("[type=range],[data-type=range]").each(function(){var t=parseFloat($(this).attr("step"))||1,e=parseFloat($(this).attr("max"))||100,a=parseFloat($(this).attr("min"))||0;$(this).width();var i=!1;$(document).on("mousedown mouseup",function(t){i="mousedown"===t.type}),$(this).addClass("range").bind("click mousemove",function(n){if("mousemove"!==n.type||i){n.offsetX||(n.offsetX=n.clientX-$(this).offset().left);var r=$(this).width(),s=n.offsetX/r*(e-a)+a,l=s%t;s-=l,2*l>t&&(s+=t),s=Math.max(s,a),s=Math.min(s,e),$(this).val(s)}})}).watch("value",function(){var t=(parseFloat($(this).attr("step"))||1,parseFloat($(this).attr("max"))||100),e=parseFloat($(this).attr("min"))||0,a=$(this).width(),i=$(this).val(),n=(i-e)/(t-e);$(this).css({backgroundPosition:n*a-500+"px center"})})};
$.fn.textarea=function(){$($(this).is("textarea")?this:$("textarea",this)).on("keyup focus",function(){var t=this;if("textarea"===t.tagName.toLowerCase()){var e=t.preValueLength;if(t.preValueLength=t.value.length,!(t.scrollHeight===t.prvScrollHeight&&t.prvOffsetHeight===t.offsetHeight&&t.value.length>=e)){for(;t.rows>1&&t.scrollHeight<t.offsetHeight;)t.rows--;for(var a=0;t.scrollHeight>t.offsetHeight&&a!==t.offsetHeight&&(a=t.offsetHeight);)t.rows++;t.rows++,t.prvScrollHeight=t.scrollHeight,t.prvOffsetHeight=t.offsetHeight}}})};
(function(t){"use strict";function e(t){var e=t.match(/^([a-z]+)(\[([a-z]+)(\=([a-z]+))?\])?$/i);try{var i=document.createElement(e[1]);if(e[3]&&e[5])return i[e[3]]=e[5],i[e[3]]===e[5];if(e[3])return e[3]in i}catch(a){return!1}return!0}t.support.datalist=e("input[list]"),t.support.placeholder=e("input[placeholder]"),t.support.range=e("input[type=range]"),t.support.number=e("input[type=number]"),t.support.date=e("input[type=date]"),t.support.color=e("input[type=color]");var i;t.fn.inputCustomEvents=function(){return t(t(this).is(":input")?this:t(":input",this)).on("keydown",function(e){40===e.which&&t(this).trigger("down"),38===e.which&&t(this).trigger("up")}).filter("input,textarea").on("input blur",function(e){if(t(this).removeClass("error").next("div.error").remove(),i&&clearTimeout(i),"blur"===e.type||"focusout"===e.type)t(this).checkValidity();else{var a=this;i=setTimeout(function(){t(a).checkValidity()},3e3)}}),t(this)},t.fn.touch=function(e){var i={};return t("body").bind("mousedown MSPointerDown",function(t){i[t.originalEvent.pointerId||0]=t.originalEvent}),t("body").bind("mouseup MSPointerUp",function(t){i[t.originalEvent.pointerId||0]=null}),t(this).each(function(){t(this).bind("selectstart",function(){return!1}).bind("touchstart touchmove",function(a){for(var n=a.originalEvent.touches||a.originalEvent.changedTouches||[a],r=0;n.length>r;r++)n[r].pointerId=n[r].identifier,n[r].offsetX=n[r].clientX-t(this).offset().left,n[r].offsetY=n[r].clientY-t(this).offset().top,"touchmove"===a.type&&e.call(this,n[r],i[n[r].identifier]),i[n[r].identifier]={offsetX:n[r].offsetX,offsetY:n[r].offsetY,pointerId:n[r].pointerId};return a.stopPropagation(),a.preventDefault(),!1}).bind("mousemove MSPointerMove",function(t){"mousemove"===t.type&&"msPointerEnabled"in window.navigator||(t.originalEvent.pointerId=t.originalEvent.pointerId||0,t.originalEvent.pointerId in i&&null!==i[t.originalEvent.pointerId]&&(e.call(this,t.originalEvent,i[t.originalEvent.pointerId]),i[t.originalEvent.pointerId]=t.originalEvent),t.preventDefault(),t.stopPropagation())})})},t.fn.form=function(){return(t(this).is("form")?t(this):t("form",this)).each(function(){t(":input[placeholder],:input[data-placeholder]",this).placeholder(),t("input[type=number],input[data-type=number]",this).number(),t("input[type=range],input[data-type=range]",this).range(),t("input[type=color],input[data-type=color]",this).color(),t("input[type=date],input[data-type=date]",this).date(),t("input[list],input[data-list]",this).datalist(),t("textarea",this).textarea(),t(":input",this).inputCustomEvents()}).submit(function(e){var i=t(this).checkValidity();if(i)t(":input.placeholder[placeholder]",this).val("");else{var a=t(".invalid",this);a.length&&a.get(0).focus(),e.preventDefault(),e.stopPropagation()}return i})},t.fn.watch=function(e,i,a){return a||(a=10),this.each(function(){function n(t){for(var e=!1,i="",a=0;l.props.length>a;a++)if(i=t.prop(l.props[a])||t.css(l.props[a])||t.attr(l.props[a]),l.vals[a]!=i){l.vals[a]=i,e=!0;break}e&&l.func&&l.func.call(t,l)}var r=t(this),o=this,s=function(){n.call(o,t(o))},l={props:e.split(","),func:i,vals:[]};t.each(l.props,function(t){l.vals[t]=r.prop(l.props[t])||r.css(l.props[t])||r.attr(l.props[t])}),"object"==typeof this.onpropertychange&&"attachEvent"in this?this.attachEvent("onpropertychange",s):setInterval(s,a)})}})(jQuery);